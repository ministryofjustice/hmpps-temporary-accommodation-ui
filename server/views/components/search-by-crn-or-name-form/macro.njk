{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}


{# params - Type of Object - Description #}
{# uiStatus - String - Specific status the record would be in #}
{# type - String - Either "bookings" or "referrals" #}
{# basePath - String - URL used to define where form should be submitted to and the link the "Clear" should take the user too  #}
{# crnOrName - String - Either a CRN or Name which the user would like to search for#}


{% macro searchByCrnOrNameForm(params) %}
    {% set searchLabel %}
        {% if params.type === 'referrals' %}
            {{ 'Search ' + params.uiStatus + ' ' +  params.type + ' with the personâ€™s name or CRN' }}
        {% else %}
            {# TODO remove once bookings can be searched using crn or name #}
            {{ 'Search ' + params.uiStatus + ' ' +  params.type + ' by CRN (case reference number)' }}
        {% endif%}
    {% endset %}

    {% set searchHint %}
        {% if params.type === 'referrals' %}
            For example, James or XD7364CD
        {% else %}
            {# TODO remove once bookings can be searched using crn or name #}
            For example, XD7364CD
        {% endif%}
    {% endset %}
    

    <form action="{{ params.basePath }}" method="get">
        {# TODO remove once bookings can be searched using crn or name #}
        {% set fieldName = 'crnOrName' if params.type === 'referrals' else 'crn' %}

        {{ govukInput(
            {
                label: {
                classes: 'govuk-label--m',
                text: searchLabel
            },
                hint: {
                text: searchHint
            },
                name: fieldName,
                id: fieldName,
                value: params.crnOrName
            }
        ) }}

        <div class="govuk-button-group">
            {{ govukButton({ text: "Search", attributes: { id: 'search-button' }, preventDoubleClick: true}) }}

            <a class="govuk-link" href="{{ params.basePath }}">Clear</a>
        </div>
    </form>
{% endmacro %}
