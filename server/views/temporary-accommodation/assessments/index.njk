{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "moj/components/sub-navigation/macro.njk" import mojSubNavigation %}
{%- from "moj/components/pagination/macro.njk" import mojPagination -%}
{% from "../../partials/breadCrumb.njk" import breadCrumb %}
{% extends "../../partials/layout.njk" %}
{% set pageTitle = "Referrals - " + applicationName %}
{% set mainClasses = "app-container govuk-body" %}

{% block beforeContent %}
    {{ breadCrumb('Referrals', []) }}
{% endblock %}

{% block content %}
    <h1 class="govuk-heading-l">{{ status | replace('_', ' ') | capitalize }} referrals</h1>

    {{ mojSubNavigation({
        label: 'Secondary navigation',
        items: [
            {
                text: 'Unallocated',
                href: paths.assessments.unallocated(),
                active: status == 'unallocated'
            },
            {
                text: 'In review',
                href: paths.assessments.inReview(),
                active: status == 'in_review'
            },
            {
                text: 'Ready to place',
                href: paths.assessments.readyToPlace(),
                active: status == 'ready_to_place'
            }
        ]
    }) }}

    <div class="govuk-!-margin-bottom-4">
        {{ mojPagination(pagination) }}
    </div>

    {{ govukTable({
        firstCellIsHeader: true,
        head: tableHeaders,
        rows: tableRows
    }) }}

    <div class="govuk-!-margin-bottom-9">
        {{ mojPagination(pagination) | replace('Pagination navigation', 'Pagination navigation after results') }}
    </div>

    {{ govukButton({
        text: "View archived referrals",
        type: "button",
        href: paths.assessments.archive(),
        classes: "govuk-button--secondary"
    }) }}
{% endblock %}

{% block extraScripts %}
    <script type="text/javascript" nonce="{{ cspNonce }}">
      $(document).ready(function() {
        window.MOJFrontend.initAll()
      })
    </script>
{% endblock %}
